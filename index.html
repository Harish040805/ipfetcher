<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IP Fetcher</title>
<style>
body { margin: 0; padding: 0; font-family: "Poppins", sans-serif; background: linear-gradient(135deg, #e8f1ff, #ffffff); color: #0d1b3d; max-width: 99vw; }
.container { max-width: 800px; margin: 90px auto; background: #ffffff; padding: 35px; border-radius: 20px; box-shadow: 0 12px 35px rgba(0, 64, 150, 0.12); animation: fadeIn 0.5s ease; }
h1 { text-align: center; margin-bottom: 30px; font-size: 26px; color: #005ad6; font-weight: 600; }
input[type="text"] { width: 28%; padding: 14px 15px; font-size: 15px; border: 2px solid #cfdfff; border-radius: 4px; background: #f8faff; outline: none; transition: 0.3s; }
input[type="text"]:focus { border-color: #2f7dff; box-shadow: 0 0 7px rgba(0, 115, 255, 0.3); }
button { margin-top: 15px; margin-left: 8px; padding: 12px 18px; font-size: 15px; border: none; border-radius: 4px; background: #2f7dff; color: white; cursor: pointer; transition: 0.25s ease; }
button:hover { background: #1459d9; transform: translateY(-2px); }
#result, #locResult { margin-top: 10px; padding: 18px; background: #f3f7ff; border-left: 4px solid #2f7dff; border-radius: 6px; line-height: 1.6; font-size: 15px; animation: fadeIn 0.4s; }
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to   { opacity: 1; transform: translateY(0); }
}
</style>
</head>
<body>
<div class="container">
    <p>Harish Creations</p>
    <h1>IP Fetcher - Get User Info from IP Address</h1>
    <input type="text" id="ipInput" autocomplete="off" placeholder="_Enter_IPv4_or_IPv6_address_" pattern="^((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}|([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4})$" title="Enter a valid IPv4 (0-255 per octet) or IPv6 address" required>
    <button onclick="getIPInfo()">Get Info</button>
    <button onclick="getIPInfo('self')">My IP Info</button>
    <button id="locBtn">Share My Location</button>
    <div id="result">The result about the IP Address</div>
    <div id="locResult">The Share my location result appears here</div>
    <script>
    function isValidIP(ip) { const ipv4Pattern = /^(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}$/; const ipv6Pattern = /^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/; return ipv4Pattern.test(ip) || ipv6Pattern.test(ip); }
    function getIPInfo(inputIP = null) {
        const ipField = document.getElementById("ipInput");
        const resultDiv = document.getElementById("result");
        const ip = inputIP === 'self' ? '' : ipField.value.trim();
        if (!ip && inputIP !== 'self') { resultDiv.innerHTML = "<strong>Please enter an IP address.</strong>"; return; }
        if (ip && !isValidIP(ip)) { resultDiv.innerHTML = "<strong>Please enter a valid IPv4 or IPv6 address.</strong>"; return; }
        resultDiv.innerHTML = "Fetching info...";
        const url = inputIP === 'self' ? `https://ipapi.co/json/` : `https://ipapi.co/${ip}/json/`;
        fetch(url)
            .then(response => { if (!response.ok) throw new Error("API request failed"); return response.json(); })
            .then(data => {
                let privateNote = "";
                if (ip && ip.includes('.') && isPrivateIP(ip)) { privateNote = "<p style='color:orange'><strong>Note:</strong> This is a reserved/private IPv4. Info may be limited.</p>"; }
                if (data.error) { resultDiv.innerHTML = `<strong>Error:</strong> ${data.reason}${privateNote}`; return; }
                resultDiv.innerHTML = `
                    ${privateNote}
                    <h3>Information for IP: ${data.ip || 'N/A'}</h3>
                    <p><strong>City:</strong> ${data.city || 'N/A'}</p>
                    <p><strong>Region:</strong> ${data.region || 'N/A'}</p>
                    <p><strong>Country:</strong> ${data.country_name || 'N/A'}</p>
                    <p><strong>Postal Code:</strong> ${data.postal || 'N/A'}</p>
                    <p><strong>Latitude:</strong> ${data.latitude || 'N/A'}</p>
                    <p><strong>Longitude:</strong> ${data.longitude || 'N/A'}</p>
                    <p><strong>Organization:</strong> ${data.org || 'N/A'}</p>
                    <p><strong>Timezone:</strong> ${data.timezone || 'N/A'}</p>
                `;
            })
            .catch(error => { resultDiv.innerHTML = `<strong>Error:</strong> ${error.message}`; });
    }
    document.getElementById('locBtn').addEventListener('click', () => {
        const out = document.getElementById('locResult');
        if (!navigator.geolocation) { out.textContent = 'Geolocation not supported by this browser.'; return; }
        out.textContent = 'Requesting permission...';
        navigator.geolocation.getCurrentPosition(
            (pos) => { const { latitude, longitude, accuracy } = pos.coords; out.innerHTML = `Lat: ${latitude}<br>Lon: ${longitude}<br>Accuracy (meters): ${accuracy}`; },
            (err) => { out.textContent = 'Permission denied or error: ' + err.message; },
            { enableHighAccuracy: true, timeout: 10000 }
        );
    });
    </script>
</div>
</body>
</html>
