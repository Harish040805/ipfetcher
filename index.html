<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IP Fetcher</title>
<style>
    body { margin: 0; padding: 0; background: linear-gradient(135deg, #d9eaff, #ffffff); font-family: "Segoe UI", Arial, sans-serif; color: #003b7a; }
    .bg-text { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 90px; font-weight: 800; opacity: 0.09; color: #0051a7;
        letter-spacing: 4px; user-select: none; z-index: 1; white-space: nowrap; }
    .container { position: relative; max-width: 850px; margin: 60px auto; background: rgba(255, 255, 255, 0.7); padding: 40px; border-radius: 18px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); backdrop-filter: blur(10px); z-index: 2; }
    h1 { text-align: center; color: #004b9a; font-size: 34px; margin-bottom: 30px; font-weight: 700; }
    input { width: 330px; padding: 12px 14px; font-size: 16px; border-radius: 8px; border: 2px solid #7fb2e7; outline: none; transition: 0.3s ease;
        background: #f0f7ff; color: #003b7a; display: inline-block; margin: 10px 0; }
    input:focus { border-color: #0051a7; box-shadow: 0 0 8px rgba(0, 89, 178, 0.4); }
    button { padding: 12px 18px; border-radius: 8px; font-size: 16px; border: 3px solid #0051a7; background: #a9d4ff; cursor: pointer; color: #003b7a;
        margin: 10px 5px; transition: 0.25s ease; font-weight: 600; }
    button:hover { background: #8fc6ff; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 89, 178, 0.25); }
    #result { margin-top: 30px; padding: 20px; background: #edf5ff; border-left: 6px solid #0051a7; border-radius: 10px; font-size: 17px; color: #002c58;
        white-space: pre-wrap; box-shadow: inset 0 0 10px rgba(0,0,0,0.08); }
    #locResult { margin-top: 15px; font-size: 16px; color: #00396d; padding-left: 5px; }
</style>
</head>
<body>
<p class="bg-text">Harish Creations</p>
<div class="container">
    <h1>IP Fetcher - Get User Info from IP Address</h1>
    <input type="text" id="ipInput" placeholder="_Enter_IPv4_or_IPv6_address_"
        pattern="^((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}|([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4})$"
        title="Enter a valid IPv4 (0-255 per octet) or IPv6 address" required>
    <button onclick="getIPInfo()">Get Info</button>
    <button onclick="getIPInfo('self')">My IP Info</button>
    <button id="locBtn">Share My Location</button>
    <div id="locResult"></div>
    <div id="result"></div>
    <script>
    function isValidIP(ip) {
        const ipv4Pattern = /^(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}$/;
        const ipv6Pattern = /^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/;
        return ipv4Pattern.test(ip) || ipv6Pattern.test(ip);
    }

    function isPrivateIP(ip) {
        const parts = ip.split('.').map(Number);
        if (parts.length !== 4) return false;
        if (parts[0] === 10) return true;
        if (parts[0] === 172 && parts[1] >= 16 && parts[1] <= 31) return true;
        if (parts[0] === 192 && parts[1] === 168) return true;
        if (parts[0] === 127) return true;
        if (parts[0] === 169 && parts[1] === 254) return true;
        return false;
    }

    function getIPInfo(inputIP = null) {
        const ipField = document.getElementById("ipInput");
        const resultDiv = document.getElementById("result");

        const ip = inputIP === 'self' ? '' : ipField.value.trim();

        if (!ip && inputIP !== 'self') {
            resultDiv.innerHTML = "<strong>Please enter an IP address.</strong>";
            return;
        }

        if (ip && !isValidIP(ip)) {
            resultDiv.innerHTML = "<strong>Please enter a valid IPv4 or IPv6 address.</strong>";
            return;
        }

        resultDiv.innerHTML = "Fetching info...";

        const url = inputIP === 'self' ? `https://ipapi.co/json/` : `https://ipapi.co/${ip}/json/`;

        fetch(url)
            .then(response => {
                if (!response.ok) throw new Error("API request failed");
                return response.json();
            })
            .then(data => {
                let privateNote = "";
                if (ip && ip.includes('.') && isPrivateIP(ip)) {
                    privateNote = "<p style='color:orange'><strong>Note:</strong> This is a reserved/private IPv4. Info may be limited.</p>";
                }

                if (data.error) {
                    resultDiv.innerHTML = `<strong>Error:</strong> ${data.reason}${privateNote}`;
                    return;
                }

                resultDiv.innerHTML = `
                    ${privateNote}
                    <h3>Information for IP: ${data.ip || 'N/A'}</h3>
                    <p><strong>City:</strong> ${data.city || 'N/A'}</p>
                    <p><strong>Region:</strong> ${data.region || 'N/A'}</p>
                    <p><strong>Country:</strong> ${data.country_name || 'N/A'}</p>
                    <p><strong>Postal Code:</strong> ${data.postal || 'N/A'}</p>
                    <p><strong>Latitude:</strong> ${data.latitude || 'N/A'}</p>
                    <p><strong>Longitude:</strong> ${data.longitude || 'N/A'}</p>
                    <p><strong>Organization:</strong> ${data.org || 'N/A'}</p>
                    <p><strong>Timezone:</strong> ${data.timezone || 'N/A'}</p>
                `;
            })
            .catch(error => {
                resultDiv.innerHTML = `<strong>Error:</strong> ${error.message}`;
            });
    }

    document.getElementById('locBtn').addEventListener('click', () => {
        const out = document.getElementById('locResult');
        if (!navigator.geolocation) {
            out.textContent = 'Geolocation not supported by this browser.';
            return;
        }
        out.textContent = 'Requesting permission...';
        navigator.geolocation.getCurrentPosition(
            (pos) => {
                const { latitude, longitude, accuracy } = pos.coords;
                out.innerHTML = `Lat: ${latitude}<br>Lon: ${longitude}<br>Accuracy (meters): ${accuracy}`;
            },
            (err) => {
                out.textContent = 'Permission denied or error: ' + err.message;
            },
            { enableHighAccuracy: true, timeout: 10000 }
        );
    });
    </script>
</div>
</body>
</html>
